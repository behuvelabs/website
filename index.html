<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Behuve Labs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="images/favicon.png" type="image/png">
</head>
<body>
    <div class="container">
        <header>
            <!----
            <button id="theme-toggle" aria-label="Toggle light and dark mode">
                <span class="icon">☾</span>
            </button>
            ----->
            <div class="spacer"></div>
            <div class="spacer"></div>
            <h1 id="typewriter"></h1>
            <div class="spacer"></div>
            <div class="spacer"></div>
            <!--<div class="hero-divider"></div>-->
        </header>
    </div>

    <script>
        const text = "behuve :)";
        const target = document.getElementById("typewriter");
        let i = 0;

        const isMobile = window.matchMedia("(max-width: 480px)").matches;
        target.classList.add("typing");
        
        function type() {
            if (isMobile) {
                target.textContent = "behuve ";
                const span = document.createElement("span");
                span.className = "green";
                span.textContent = ":)";
                target.appendChild(span);
                target.classList.remove("typing");
            }   
            else {
                if (i < text.length) {
                    // When we reach the last two characters ":)"
                    if (i === text.length - 2) {
                        const span = document.createElement("span");
                        span.className = "green";
                        span.textContent = text.slice(i);
                        target.appendChild(span);
                        i = text.length;
                    } else {
                        target.append(text.charAt(i));
                        i++;
                    }
                    setTimeout(type, 200);
                } else {
                    target.classList.remove("typing"); // stops flicker
                }
            }
        }
        
        type();
        
        function showSection(id) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            event.target.classList.add('active');
        }

        const toggle = document.getElementById("theme-toggle");
        const icon = toggle.querySelector(".icon");

        function setTheme(theme) {
            document.body.classList.toggle("light", theme === "light");
            icon.textContent = theme === "light" ? "☀︎" : "☾";
            localStorage.setItem("theme", theme);
        }

        // initial load
        const savedTheme = localStorage.getItem("theme");
        if (savedTheme) {
            setTheme(savedTheme);
        } else if (window.matchMedia("(prefers-color-scheme: light)").matches) {
            setTheme("light");
        } else {
            setTheme("dark");
        }

        toggle.addEventListener("click", () => {
            const isLight = document.body.classList.contains("light");
            setTheme(isLight ? "dark" : "light");
        });
    </script>
</body>
</html>